# QuickPerf live

<strong>A tool to ease your work as a developer</strong>, not only regarding performance. <em>Make your developer job easier.</em></strong>

---
<p>
    <a  href="https://www.youtube.com/watch?v=4Sbvaewrm6A&t=913s">
    <strong>üì∫ QuickPerf live demo</strong> (in French)
    </a>
    &nbsp;&nbsp;
   <a href="https://twitter.com/quickperf">       
        <img alt="@QuickPerf" src="https://img.shields.io/twitter/url?label=Twitter&style=social&url=https%3A%2F%2Ftwitter.com%2Fquickperf">
   </a>
    &nbsp;&nbsp;
    <a href="https://github.com/quick-perf/quickperf-live/blob/master/LICENSE.txt">
        <img src="https://img.shields.io/badge/license-Apache2-blue.svg"
             alt = "License">
    </a>
    &nbsp;&nbsp;
    <a href="https://github.com/quick-perf/quickperf-live/actions?query=workflow%3ACI">
    <img src="https://img.shields.io/github/workflow/status/quick-perf/quickperf-live/CI"
         alt = "Build Status">
    </a>
</p>

---

## Main features

### Diagnose performance
üîç Output examples
```
GET 200 http://localhost:8080/owners?lastName=
* [WARNING] At least one SQL query has an execution time greater than 50 ms
```
 
```
GET 200 http://localhost:8080/vets.html
* [WARNING] Synchronous HTTP call while the application maintains the DB connection (between the time the DB connection is gotten from the data source and closed)
* Synchronous HTTP calls
* GET 200 http://localhost:8080/external-call- Execution time: 306 ms
```

```
GET 200 http://localhost:8080/owners/2/edit
* [WARNING] Heap allocation is greater than 10 000 000 bytes: 17 509 888 bytes
```

üëâ [Learn more](./doc/performance_diagnostics.md)

üí° You can use performance-diagnostic features *during development*, or to *help you to diagnostic the performance of a deployed application*.

### Generate non-regression tests
The generated tests aim at ensuring a non-regression on:
* the ***functional behavior***
* ***performance-related properties***

üëâ [Learn more](./doc/test_generation.md)

## Some use cases

You have many things to do or to think in your daily job. 
You may have not enough time to improve the following issues that will ease your daily job or make the user experience better? _QuickPerf live_ may help you!

### You work on an application lacking automated tests on business behavior
You work on an application .
You are not confident that your new development does not break another functional feature? You can generate automated tests with _QuickPerf live_!
More [here](./doc/test_generation.md).

### You want to fix an N+1 select
_QuickPerf live_ is able to generate an automatic test reproducing the N+1 select. You can use it to investigate the cause of the N+1 select.The generated test will ensure a non-regression on the N+1 select together with a non_regression on the functional behavior.

### Your application allocates a lot
_QuickPerf live_ allows you to measure the heap allocation generated by each HTTP call.

### You want to know what business data is handled by a web service
Find out what types of business data a web service handles may be hard.
Sometimes, we, as a developer, we also may be tempted to load more data than necessary to implement a business behavior. This has sometimes an impact
on performance. In both cases, _QuickPerf live_ can help you by displaying the selected columns from the database (cf. *Selected columns* part in [Database diagnostics](./doc/database_diagnostics.md)), or by [creating the database dataset
of a generated web service test](./doc/test_generation.md).


## Add _QuickPerf live_ to you project 

### Limitations
_QuickPerf live_ works today for web applications developed with Spring Boot 2.

‚ö† _Today, we do not recommend enabling the tool in a production environment._

### Add QuickPerf live dependency
```xml
<dependency>
    <groupId>org.quickperf</groupId>
    <artifactId>quick-perf-live-springboot2</artifactId>
    <version>0.1-SNAPSHOT</version>
</dependency>
```
Maven central contains a snapshot version. To use it, your projects need to access to Maven central snapshots:
```xml
<repositories>
    <repository>
        <id>maven-snapshots</id>
        <url>https://oss.sonatype.org/content/repositories/snapshots</url>
        <layout>default</layout>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
</repositories>
```

You can also build the library:
```bash
git clone https://github.com/quick-perf/quickperf-live.git
```
```bash
mvn clean install
```

### Enable QuickPerf live

From a _yaml_ file:

```yaml
quickperf:
  enabled: true
```

From a _.properties_ file:

```properties
quickperf.enabled=true
```

## Enable _QuickPerf live_ features

### Enable the performance diagnostic and test generation features

You can configure the performance diagnostic and the test generation with properties.
You can update the configuration after the application startup with the help of MBeans.

üëâ [Performance diagnostics](./doc/performance_diagnostics.md)

üëâ [Test generation](./doc/test_generation.md)

### Tip
QuickPerf MBeans are unavailable? Read [this](./doc/faq.md).

### Configuration examples

üëâ [A _yaml_ file example](./spring-boot-2/src/test/resources/quickperf-properties-test.yml)

üëâ [A _.properties_ file example](./spring-boot-2/src/test/resources/quickperf-properties-test.properties)


## Export QuickPerf live info

### Display info on application logs

```properties
logging.level.org.quickperf.*=INFO
```

### Implement custom exports
Create Spring beans implementing ```QuickPerfHttpCallInfoWriter``` or ```QuickPerfHttpCallWarningWriter``` interfaces.
This feature can be useful to generate a performance diagnostic report or to record the history of performance-related properties.